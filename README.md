# 台灣即時 AQI 地圖顯示程式

這個程式可以串接環境部 API 獲取全台即時 AQI 數據，並使用 Folium 在地圖上標示所有測站位置。

## 功能特色

- 串接環境部 AQI API (aqx_p_432)
- 從 `.env` 檔案讀取 API Key
- 使用 Folium 在互動式地圖上顯示所有測站
- **簡化三級分色顯示**：0-50 綠色、51-100 黃色、101+ 紅色
- **簡化資訊視窗**：點擊測站顯示站名、所在地與即時 AQI 數值
- 自動處理環境安裝

## 安裝與設定

### 1. 安裝依賴套件

```bash
pip install -r requirements.txt
```

### 2. 設定 API Key

在專案根目錄的 `.env` 檔案中添加您的環境部 API Key：

```
AQI_API_KEY=your_api_key_here
```

**如何取得 API Key：**
1. 前往 [環境部資料開放平台](https://data.epa.gov.tw/)
2. 註冊帳號並申請 API Key
3. 將 API Key 填入 `.env` 檔案

## 使用方式

執行程式：

```bash
python aqi_map.py
```

程式會：
1. 自動獲取最新的 AQI 數據
2. 在地圖上標示所有測站位置
3. 根據 AQI 數值使用不同顏色
4. 儲存地圖為 HTML 檔案到 `outputs/` 目錄

## 輸出檔案

- 地圖檔案會儲存在 `outputs/` 目錄下
- 檔名格式：`aqi_map_YYYYMMDD_HHMMSS.html`
- 使用瀏覽器開啟 HTML 檔案即可查看互動式地圖

## AQI 等級說明

| AQI 數值 | 等級 | 顏色 | 健康影響 |
|---------|------|------|----------|
| 0-50 | 良好 | 綠色 | 空氣品質令人滿意，基本無空氣污染 |
| 51-100 | 普通 | 黃色 | 空氣品質可接受，但某些污染物可能對極少數異常敏感人群健康有較弱影響 |
| 101+ | 不健康 | 紅色 | 進一步加劇易敏感人群症狀，可能對健康人群心臟、呼吸系統有影響 |

## 專案結構

```
python-project/
├── aqi_map.py          # 主程式
├── requirements.txt    # 依賴套件清單
├── .env               # 環境變數設定（需自行建立）
├── .gitignore         # Git 忽略檔案
├── README.md          # 說明文件
├── data/              # 資料目錄
└── outputs/           # 輸出目錄
```

## 注意事項

- 請確保網路連線正常，程式需要存取環境部 API
- API 有使用限制，請避免頻繁請求
- 地圖檔案可能較大，建議使用現代瀏覽器開啟
- 如遇 API 錯誤，請檢查 API Key 是否正確設定

## 故障排除

### 常見問題

1. **API Key 錯誤**
   - 檢查 `.env` 檔案中的 `AQI_API_KEY` 是否正確
   - 確認 API Key 仍然有效

2. **網路連線問題**
   - 檢查網路連線
   - 確認防火牆沒有阻擋 API 請求

3. **套件安裝失敗**
   - 嘗試使用 `pip install --upgrade pip` 更新 pip
   - 檢查 Python 版本是否相容

## 授權

本專案僅供學習和研究使用。
